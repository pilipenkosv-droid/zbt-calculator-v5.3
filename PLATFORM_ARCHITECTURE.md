# –ü–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## üéØ –¶–µ–ª—å

–ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –º–æ–±–∏–ª—å–Ω–æ–π –∏ –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–π –≤–µ—Ä—Å–∏–π –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–Ω–æ–≥–æ –≤–ª–∏—è–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ platforms/
‚îÇ   ‚îú‚îÄ‚îÄ mobile/                 # –ú–æ–±–∏–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MobileApp.tsx      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/        # –ú–æ–±–∏–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles/            # –ú–æ–±–∏–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ mobile.css
‚îÇ   ‚îî‚îÄ‚îÄ desktop/               # –î–µ—Å–∫—Ç–æ–ø–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
‚îÇ       ‚îú‚îÄ‚îÄ DesktopApp.tsx    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ components/       # –î–µ—Å–∫—Ç–æ–ø–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ styles/           # –î–µ—Å–∫—Ç–æ–ø–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ           ‚îî‚îÄ‚îÄ desktop.css
‚îú‚îÄ‚îÄ shared/                    # –û–±—â–∏–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AppShell.tsx     # –¢–æ—á–∫–∞ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º
‚îÇ   ‚îú‚îÄ‚îÄ components/          # –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ hooks/               # –û–±—â–∏–µ —Ö—É–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ lib/                 # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (pricing, levelDetails)
‚îÇ   ‚îú‚îÄ‚îÄ platform/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ usePlatform.ts  # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ types/               # –¢–∏–ø—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ platform.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculator.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îú‚îÄ‚îÄ utils/               # –£—Ç–∏–ª–∏—Ç—ã (validation, formatCurrency)
‚îÇ   ‚îî‚îÄ‚îÄ styles/
‚îÇ       ‚îî‚îÄ‚îÄ platform/        # –ü–ª–∞—Ç—Ñ–æ—Ä–º–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ utils/                   # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (analytics, abTesting)
‚îî‚îÄ‚îÄ main.tsx                # Entry point

```

## üîß –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã

### 1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `usePlatform()` hook:

```typescript
// –ë—Ä–µ–π–∫–ø–æ–∏–Ω—Ç: < 1024px = mobile, >= 1024px = desktop
// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: pointer: coarse (touch —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
// Fallback: user agent

const { platform, screenWidth, isTouch } = usePlatform();
```

### 2. –£—Å–ª–æ–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (Code Splitting)

AppShell –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É —á–µ—Ä–µ–∑ React.lazy:

```typescript
const MobileApp = lazy(() => import('../../platforms/mobile/MobileApp'));
const DesktopApp = lazy(() => import('../../platforms/desktop/DesktopApp'));

// –†–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –¢–û–õ–¨–ö–û –≤—ã–±—Ä–∞–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
{platform === 'mobile' ? <MobileApp /> : <DesktopApp />}
```

### 3. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å platform

–í—Å–µ —Å–æ–±—ã—Ç–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞—é—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—É:

```typescript
track('calc_param_change', {
  platform: 'mobile', // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
});
```

## üìù –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

#### –ï—Å–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±—â–∏–π –¥–ª—è –æ–±–µ–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º:
```
src/shared/components/Button.tsx
```

#### –ï—Å–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π:
```
src/platforms/mobile/components/MobileHeader.tsx
src/platforms/desktop/components/DesktopHeader.tsx
```

### –°—Ç–∏–ª–∏

#### –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏:
```
src/platforms/mobile/styles/mobile.css
src/platforms/desktop/styles/desktop.css
```

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–µ —Å—Ç–∏–ª–∏ (CSS Modules):
```
src/platforms/mobile/components/Header.mobile.module.scss
src/platforms/desktop/components/Header.desktop.module.scss
```

### –ò–º–ø–æ—Ä—Ç—ã

‚ùå **–ó–ê–ü–†–ï–©–ï–ù–û** –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã:
```typescript
// –í mobile/ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
import Something from '../../desktop/components/Something'; // ‚ùå
```

‚úÖ **–†–ê–ó–†–ï–®–ï–ù–û**:
```typescript
// –ò–º–ø–æ—Ä—Ç –∏–∑ shared
import { pricing } from '../../shared/lib/pricing';

// –ò–º–ø–æ—Ä—Ç –∏–∑ —Å–≤–æ–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
import MobileHeader from './components/MobileHeader';
```

## üöÄ –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤** - platforms/{mobile,desktop}, shared/
2. **usePlatform.ts** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ø–æ screenWidth + pointer
3. **AppShell.tsx** - —Ç–æ—á–∫–∞ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ —Å React.lazy
4. **–û–±—â–∏–µ –º–æ–¥—É–ª–∏** - lib/, types/, utils/ –≤ shared/
5. **MobileApp.tsx** - –±–∞–∑–æ–≤–∞—è –º–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è (placeholder)
6. **DesktopApp.tsx** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π App.tsx
7. **Analytics** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ platform –≤ —Å–æ–±—ã—Ç–∏—è

### üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ:

8. –†–∞—Å–∫–æ–ª–æ—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
9. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–µ —Å—Ç–∏–ª–∏ (*.mobile.module.scss, *.desktop.module.scss)
10. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã

## üìä –ú–µ—Ç—Ä–∏–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Code Splitting:

–û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network ‚Üí JS:
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º: –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `MobileApp.[hash].js`
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ: –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `DesktopApp.[hash].js`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Analytics:

–í—Å–µ —Å–æ–±—ã—Ç–∏—è –≤ console.log –≤–∫–ª—é—á–∞—é—Ç:
```
[Analytics][mobile] calc_param_change { platform: 'mobile', ... }
[Analytics][desktop] app_loaded { platform: 'desktop', ... }
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º:

```typescript
// –í main.tsx –∏–ª–∏ —á–µ—Ä–µ–∑ props
<AppShell forcePlatform="mobile" />  // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –º–æ–±–∏–ª—å–Ω–∞—è
<AppShell forcePlatform="desktop" /> // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –¥–µ—Å–∫—Ç–æ–ø–Ω–∞—è
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã:

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (–∫–æ–≥–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã)
npm test
```

## üìñ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –®–∞–≥ 1: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–∞–∑–ª–∏—á–∏—è
- –ï—Å—Ç—å –ª–∏ —Ä–∞–∑–ª–∏—á–∏—è –≤ UI –º–µ–∂–¥—É mobile/desktop?
- –ï—Å—Ç—å –ª–∏ —Ä–∞–∑–ª–∏—á–∏—è –≤ –ø–æ–≤–µ–¥–µ–Ω–∏–∏?

### –®–∞–≥ 2: –ï—Å–ª–∏ —Ä–∞–∑–ª–∏—á–∏—è –µ—Å—Ç—å
```
# –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
src/platforms/mobile/components/Header.tsx
src/platforms/desktop/components/Header.tsx
```

### –®–∞–≥ 3: –ï—Å–ª–∏ —Ä–∞–∑–ª–∏—á–∏–π –Ω–µ—Ç
```
# –û—Å—Ç–∞–≤–∏—Ç—å –≤ shared
src/shared/components/Button.tsx
```

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
console.log('Screen width:', window.innerWidth);
console.log('Platform:', window.innerWidth < 1024 ? 'mobile' : 'desktop');
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤:

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
performance.getEntriesByType('resource')
  .filter(r => r.name.includes('App'))
  .forEach(r => console.log(r.name));
```

## üí° Best Practices

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ shared/** –¥–ª—è –æ–±—â–µ–π –ª–æ–≥–∏–∫–∏ (pricing, types, utils)
2. **–ò–∑–±–µ–≥–∞–π—Ç–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** - –µ—Å–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π, –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ shared/
3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ–±–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã** –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ TypeScript** –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Ç–∏–ø–æ–≤ –∏ –∏–º–ø–æ—Ä—Ç–æ–≤
5. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ** –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –≤ –∫–æ–¥–µ

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [React.lazy –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://react.dev/reference/react/lazy)
- [Code Splitting in Vite](https://vitejs.dev/guide/features.html#async-chunk-loading-optimization)
- [Media Queries](https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries)

