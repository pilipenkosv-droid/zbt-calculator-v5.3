/**
 * BackgroundGradient.module.scss
 * 
 * Сложный многослойный градиент для фона калькулятора Zabota 2.0
 * 
 * СТРУКТУРА ГРАДИЕНТА:
 * 1. База - наклонный linear-gradient с брендовыми цветами
 * 2. Оверлеи - 2-3 крупных radial-gradient по углам
 * 3. Глубина - conic-gradient для дополнительной глубины
 * 4. Вигнетирование - периферийная затененность
 * 5. Текстура - subtle noise через repeating-linear-gradient
 * 
 * НАСТРОЙКА ЦВЕТОВ:
 * Измените CSS переменные в theme.css:
 * --color-brand: #FF7A00 (основной оранжевый)
 * --color-brand-2: #FFAA33 (янтарный)
 * --color-accent: #FF6A3D (кораллово-оранжевый)
 * --bg-warm: #FFF3E0 (кремово-персиковый)
 * --bg-deep: #141218 (темный угольно-фиолетовый)
 * 
 * НАСТРОЙКА ГРАДИЕНТОВ:
 * - Угол базового градиента: измените 40deg
 * - Позиции радиальных пятен: настройте at X% Y%
 * - Размеры пятен: измените 90% 70%
 * - Интенсивность: настройте opacity в color-mix()
 */

.container {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  
  /* БАЗОВЫЙ ГРАДИЕНТ - наклонный linear-gradient */
  background:
    /* База: от насыщенного оранжевого к теплому светлому */
    linear-gradient(
      40deg, 
      var(--color-brand) 0%, 
      var(--color-brand-2) 45%, 
      var(--bg-warm) 100%
    ),
    
    /* КРУПНЫЕ РАДИАЛЬНЫЕ ПЯТНА */
    /* Верхний левый угол - основное пятно */
    radial-gradient(
      90% 70% at 10% 0%, 
      color-mix(in oklab, var(--color-brand) 40%, transparent) 0%, 
      transparent 70%
    ),
    
    /* Нижний правый угол - акцентное пятно */
    radial-gradient(
      80% 60% at 100% 100%, 
      color-mix(in oklab, var(--color-accent) 30%, transparent) 0%, 
      transparent 65%
    ),
    
    /* Центральное пятно для глубины */
    radial-gradient(
      70% 50% at 50% 50%, 
      color-mix(in oklab, var(--color-brand-2) 20%, transparent) 0%, 
      transparent 60%
    ),
    
    /* ВИГНЕТИРОВАНИЕ - периферийная затененность */
    radial-gradient(
      120% 100% at 50% 50%, 
      transparent 60%, 
      color-mix(in oklab, black 12%, transparent) 100%
    ),
    
    /* ТЕКСТУРА - subtle noise */
    repeating-linear-gradient(
      0deg, 
      color-mix(in oklab, black 3%, transparent) 0 2px, 
      transparent 2px 4px
    );
  
  /* Легкое усиление насыщенности */
  filter: saturate(1.02);
  
  /* Плавные переходы при изменении размера */
  transition: filter 0.3s ease;
}

/* SVG оверлей для дополнительных эффектов */
.svgOverlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0.6;
  mix-blend-mode: soft-light;
}

/* ТЕМНАЯ ТЕМА */
@media (prefers-color-scheme: dark) {
  .container {
    background:
      /* База для темной темы */
      linear-gradient(
        45deg, 
        var(--bg-deep) 0%, 
        color-mix(in oklab, var(--color-brand) 30%, var(--bg-deep)) 60%, 
        var(--bg-deep) 100%
      ),
      
      /* Радиальные пятна для темной темы */
      radial-gradient(
        90% 70% at 0% 100%, 
        color-mix(in oklab, var(--color-brand-2) 25%, transparent) 0%, 
        transparent 70%
      ),
      
      radial-gradient(
        80% 60% at 100% 0%, 
        color-mix(in oklab, var(--color-accent) 25%, transparent) 0%, 
        transparent 65%
      ),
      
      /* Вигнетирование для темной темы */
      radial-gradient(
        120% 100% at 50% 50%, 
        transparent 55%, 
        color-mix(in oklab, black 18%, transparent) 100%
      ),
      
      /* Текстура для темной темы */
      repeating-linear-gradient(
        0deg, 
        color-mix(in oklab, white 1.5%, transparent) 0 2px, 
        transparent 2px 5px
      );
    
    /* Усиление контраста для темной темы */
    filter: saturate(1.05) contrast(1.02);
  }
}

/* МОБИЛЬНЫЕ УСТРОЙСТВА */
@media (max-width: 768px) {
  .container {
    /* Упрощаем градиенты на мобильных */
    background:
      linear-gradient(
        35deg, 
        var(--color-brand) 0%, 
        var(--color-brand-2) 50%, 
        var(--bg-warm) 100%
      ),
      radial-gradient(
        80% 60% at 20% 20%, 
        color-mix(in oklab, var(--color-brand) 30%, transparent) 0%, 
        transparent 60%
      ),
      radial-gradient(
        70% 50% at 80% 80%, 
        color-mix(in oklab, var(--color-accent) 25%, transparent) 0%, 
        transparent 55%
      ),
      radial-gradient(
        100% 80% at 50% 50%, 
        transparent 50%, 
        color-mix(in oklab, black 8%, transparent) 100%
      );
    
    /* Меньше фильтров для производительности */
    filter: saturate(1.01);
  }
}

/* ПЛАНШЕТЫ */
@media (min-width: 769px) and (max-width: 1024px) {
  .container {
    /* Средняя сложность для планшетов */
    background-size: auto;
  }
}

/* ДЕСКТОПЫ */
@media (min-width: 1025px) {
  .container {
    /* Полная сложность для десктопов */
    background-size: auto;
    
    /* Дополнительные эффекты для больших экранов */
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(
          60% 40% at 80% 20%, 
          color-mix(in oklab, var(--color-accent) 15%, transparent) 0%, 
          transparent 50%
        );
      opacity: 0.7;
      mix-blend-mode: overlay;
    }
  }
}

/* ВЫСОКОПРОИЗВОДИТЕЛЬНЫЕ УСТРОЙСТВА */
@media (min-width: 1025px) and (min-resolution: 2dppx) {
  .container {
    /* Дополнительные слои для Retina дисплеев */
    &::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        conic-gradient(
          from 45deg at 70% 30%, 
          transparent 0deg,
          color-mix(in oklab, var(--color-brand) 10%, transparent) 90deg,
          color-mix(in oklab, var(--color-accent) 8%, transparent) 180deg,
          transparent 270deg,
          transparent 360deg
        );
      opacity: 0.4;
      mix-blend-mode: soft-light;
    }
  }
}

/* АНИМАЦИЯ (опционально) */
@media (prefers-reduced-motion: no-preference) {
  .container {
    animation: subtleShift 20s ease-in-out infinite;
  }
  
  @keyframes subtleShift {
    0%, 100% { 
      filter: saturate(1.02) hue-rotate(0deg); 
    }
    50% { 
      filter: saturate(1.05) hue-rotate(2deg); 
    }
  }
}

/* ОТКЛЮЧЕНИЕ АНИМАЦИИ */
@media (prefers-reduced-motion: reduce) {
  .container {
    animation: none;
  }
}
